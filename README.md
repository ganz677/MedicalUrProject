# Медицинский Урологический Центр API

## Назначение проекта

**Медицинский Урологический Центр API** — это серверное приложение на FastAPI, предназначенное для автоматизации онлайн-записи пациентов на прием в урологическую клинику. Система реализует REST API для приема и хранения заявок на прием, с возможностью интеграции с любым фронтендом или внешними сервисами.

---

## Основные возможности

- Прием заявок на прием к врачу через API.
- Валидация и хранение контактных данных пациентов.
- Согласие на обработку персональных данных.
- Гибкая архитектура для расширения (например, добавление новых моделей, интеграция с внешними сервисами).
- Асинхронная работа с PostgreSQL через SQLAlchemy.
- Миграции базы данных с помощью Alembic.

---

## Архитектура

- **Backend:** FastAPI, асинхронный Python 3.13+, PostgreSQL, Alembic, SQLAlchemy.
- **Frontend:** В проекте отсутствует, но API легко интегрируется с любым клиентом (веб, мобильное приложение и т.д.).
- **Docker:** Используется для запуска PostgreSQL.

---

## Быстрый старт

### 1. Клонирование репозитория

```bash
git clone <repo_url>
cd main_project
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта и укажите параметры подключения к БД:

```
DB_USER=your_user
DB_PASSWORD=your_password
DB_NAME=your_db
DB_HOST=localhost
DB_PORT=5432
```

### 3. Запуск PostgreSQL через Docker

```bash
docker-compose up -d
```

### 4. Установка зависимостей

```bash
pip install -r requirements.txt
# или через pyproject.toml, если используется poetry/pdm/uv
```

### 5. Применение миграций

```bash
cd backend
alembic upgrade head
```

### 6. Запуск сервера

```bash
python run.py
```

API будет доступен по адресу: http://127.0.0.1:8000

---

## Описание API

### POST `/api/v1/appointments/create`

Создание новой заявки на прием.

**Пример запроса:**
```json
{
  "first_name": "Иван",
  "last_name": "Иванов",
  "phone_number": "+79991234567",
  "email": "ivan@example.com",
  "age": "30-39",
  "preferred_time": "2025-07-23 15:00",
  "message": "Хотел бы записаться на консультацию",
  "privacy_consent": true
}
```

**Ответ:**
```json
{
  "success": true,
  "appointment": {
    "id": "uuid",
    "first_name": "Иван",
    "last_name": "Иванов",
    "phone_number": "+79991234567",
    "email": "ivan@example.com",
    "age": "30-39",
    "preferred_time": "2025-07-23 15:00",
    "message": "Хотел бы записаться на консультацию",
    "privacy_consent": true,
    "status": "new",
    "created_at": "...",
    "updated_at": "..."
  },
  "message": "Запись успешно создана"
}
```

---

## Миграции и работа с БД

- Используется Alembic для управления схемой БД.
- Все параметры подключения к БД настраиваются через `.env` и `backend/core/settings.py`.

---

## Зависимости

- Python >= 3.13
- FastAPI >= 0.116.1
- SQLAlchemy >= 2.0.41
- Alembic >= 1.16.4
- asyncpg, psycopg2, orjson, pydantic-settings, python-dotenv, uvicorn и др.

---

## Тестирование

В проекте предусмотрена директория `tests/` для автотестов (на момент анализа — пуста).

---

## Контакты и поддержка

Для вопросов и предложений — создайте issue или свяжитесь с разработчиком.
